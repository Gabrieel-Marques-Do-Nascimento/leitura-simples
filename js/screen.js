import{$ButtonScrollPage as e,$startButton as t,$resetButtonn as n,Cache_screen_name as o,inputActived as s,$screen_text as l,$PauseButton as i,$PlayButton as a,winHeight as r,$pai_das_telas as d,pai_screen_style as c,$bookmark as u,$button_low as p,$button_up as m,Cache_json_name as y,$ButtonMenuAnburger as f}from"./script.js";import{save_text_in_cache as g,load_text_from_cache as b,loadScroll as k}from"./utils.js";import{buttonstatic as L,screen_size_height as h,skip_line as T,change_top as I,ReadScreen as z}from"./utils.js";import{loadText_Cache_json as A}from"./global.js";let E=parseInt(c.marginBottom.substring(0,c.marginBottom.indexOf("px")))+parseInt(c.marginTop.substring(0,c.marginTop.indexOf("px")));const x=A(y);export let v=h({font_size:x["font-size"],height:r,logs:!0},70,E);l.style.height=v[0]+"px",l.style.textAlign="justify",d.style.height=v[0]+"px",l.style.fontSize=x["font-size"]+"px",s[0].classList.add("disabled");const q=b(o);q?(L(document.querySelectorAll(".disabled"),"none"),L(document.querySelectorAll(" .activated"),"block"),s[0].value=q,i.style.display="none",z(q),f.classList.add("ButtonMenuAnburgerTXTon")):(L(document.querySelectorAll(".disabled"),"block"),L(document.querySelectorAll(" .activated"),"none"),u.style.display="none",f.classList.remove("ButtonMenuAnburgerTXTon")),s[0].addEventListener("keydown",(function(e){if("Enter"===e.key){L(document.querySelectorAll(".disabled"),"none"),L(document.querySelectorAll(" .activated"),"block");let e=s[0].value;if(e){g(e,o);let t=e;l.innerHTML=t}e||(e=b(o))}})),t.addEventListener("click",(()=>{L(document.querySelectorAll(".disabled"),"none"),L(document.querySelectorAll(" .activated"),"block"),f.classList.add("ButtonMenuAnburgerTXTon");let e=s[0].value;if(e){g(e,o);let t=e;l.innerHTML=t}e||(e=b(o))})),n.addEventListener("click",(()=>{f.classList.remove("ButtonMenuAnburgerTXTon"),L(document.querySelectorAll(".disabled"),"block"),L(document.querySelectorAll(" .activated"),"none"),u.style.display="none"}));let S=!1;if(document.addEventListener("keyup",(e=>{"w"!==e.key&&"s"!==e.key||(S=!1)})),document.addEventListener("keydown",(e=>{S||(S=!0,"w"===e.key&&(u.style.top=I(-(parseInt(x["font-size"])/2+parseInt(x["font-size"])),!0,u,l)),"s"===e.key&&(u.style.top=I(parseInt(x["font-size"])/2+parseInt(x["font-size"]),!0,u,l)))})),"mouse"===x.markmove){let e=null;document.addEventListener("mousemove",(function(t){e&&cancelAnimationFrame(e),e=requestAnimationFrame((()=>{const e=t.clientY;u.style.top=`${e}px`}))}))}"button"==x.markmove&&(p.style.display="block",m.style.display="block",p.addEventListener("click",(()=>{u.style.top=I(parseInt(x["font-size"])/2+parseInt(x["font-size"]),!0,u,l)})),m.addEventListener("click",(()=>{u.style.top=I(-(parseInt(x["font-size"])/2+parseInt(x["font-size"])),!0,u,l)}))),"screen"==x.markmove&&(p.style.display="none",m.style.display="none",document.addEventListener("mousemove",(function(e){const t=e.clientX,n=document.documentElement.clientWidth/2;document.body.addEventListener("click",(function(e){"button"===e.target.tagName.toLowerCase()||"a"===e.target.tagName.toLowerCase()||"input"===e.target.tagName.toLowerCase()&&"button"===e.target.type||(t<n&&(u.style.top=I(-(parseInt(x["font-size"])/2+parseInt(x["font-size"])),!0,u,l)),t>n&&(u.style.top=I(parseInt(x["font-size"])/2+parseInt(x["font-size"]),!0,u,l)))}))}))),l.addEventListener("scroll",(function(){u.style.top=parseInt(l.getBoundingClientRect().top)+"px"}));let w=!1,B=!1;e.addEventListener("click",(()=>{let t=0,n=l.scrollTop;const o=l.scrollHeight;let s=n+l.clientHeight,i=parseInt(l.style.height.replace("px",""));s+1>=o?(B=!0,w=!1):(w=!0,B=!1),w&&(t=i+n,o-s<i&&(t=o-s+n)),B&&(t=0),l.scrollTop=t,e.disabled=!0,setTimeout((function(){e.disabled=!1}),500)})),document.addEventListener("keydown",(function(t){if("a"===t.key){let t=l.scrollTop,n=parseInt(l.style.height.replace("px",""))+t;l.scrollTop=n,e.disabled=!0,setTimeout((function(){e.disabled=!1}),1500)}})),document.addEventListener("keydown",(function(t){if("q"===t.key){let t=l.scrollTop-parseInt(l.style.height.replace("px",""));l.scrollTop=t,e.disabled=!0,setTimeout((function(){e.disabled=!1}),1500)}})),u.classList.add("highlight"),u.style.height=parseInt(x["font-size"])/2+parseInt(x["font-size"])+"px",document.body.appendChild(u);